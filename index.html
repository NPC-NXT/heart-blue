<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Floating Hearts ‚Äî üíñ</title>
  <meta name="description" content="Trang tim bay l√£ng m·∫°n v√† ƒë·∫πp ‚Äî truy·ªÅn th√¥ng ƒëi·ªáp ch√≠nh qua ?text= trong URL." />

  <style>
    /* Reset & layout */
    :root{
      --bg-1: #0b0710;
      --bg-2: #12081a;
      --accent: #ff6b9a;
      --accent-2: #ff2d95;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,50,120,0.06), transparent),
                  radial-gradient(800px 400px at 90% 80%, rgba(255,20,100,0.04), transparent),
                  linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color: #fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:clamp(16px,4vmin,48px);
    }

    /* Heart field (behind content) */
    .hearts {
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }

    .heart {
      position:absolute;
      left:50%;
      top:110%;
      transform:translateX(-50%) rotate(45deg);
      will-change:transform,opacity,filter;
      user-select:none;
      filter: drop-shadow(0 6px 18px rgba(255,60,120,0.08));
      animation-name:floatUp, sway, fadeInOut;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }

    .heart .shape {
      display:block;
      width:1em;
      height:1em;
      background:var(--accent);
      position:relative;
      transform:rotate(-45deg);
      border-radius:0.25em;
      box-shadow:
        0 0 18px rgba(255,110,156,0.18),
        0 0 36px rgba(255,60,140,0.12);
    }
    /* hai qu·∫£ b·∫ßu */
    .heart .shape::before,
    .heart .shape::after{
      content:"";
      position:absolute;
      width:1em;
      height:1em;
      background:var(--accent);
      border-radius:50%;
      top:-50%;
      left:0;
      transform-origin:50% 50%;
      box-shadow:
        0 0 18px rgba(255,110,156,0.18),
        0 0 36px rgba(255,60,140,0.12);
    }
    .heart .shape::after{
      left:50%;
      top:0;
    }

    /* Bi·∫øn th·ªÉ m√†u */
    .heart.variant-2 .shape{ background:var(--accent-2) }
    .heart.variant-2 .shape::before,
    .heart.variant-2 .shape::after{ background:var(--accent-2) }

    /* C√°c animation */
    @keyframes floatUp{
      0%{ transform: translateX(-50%) translateY(0) rotate(0deg) scale(1) }
      100%{ transform: translateX(-50%) translateY(-140vh) rotate(360deg) scale(1.15) }
    }
    @keyframes sway{
      0%{ transform: translateX(-50%) translateY(0) rotate(0deg) }
      50%{ transform: translateX(-40%) translateY(-10vh) rotate(10deg) }
      100%{ transform: translateX(-60%) translateY(-20vh) rotate(-5deg) }
    }
    @keyframes fadeInOut{
      0%{ opacity:0 }
      5%{ opacity:1 }
      85%{ opacity:1 }
      100%{ opacity:0 }
    }

    /* Th·∫ª ch·ª©a n·ªôi dung ch√≠nh */
    .card{
      position:relative;
      z-index:2;
      max-width:1100px;
      width:100%;
      text-align:center;
      padding:clamp(24px,6vmin,64px);
      border-radius:18px;
      background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 6px 40px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.03);
    }

    .message{
      font-weight:700;
      color: #fff;
      font-size: clamp(1.6rem, 6vw, 3.2rem);
      line-height:1.05;
      text-shadow:
        0 6px 18px rgba(0,0,0,0.6),
        0 0 18px rgba(255,80,140,0.18);
      margin-bottom: clamp(12px, 2.4vmin, 18px);
      word-break:break-word;
      white-space:pre-wrap;
    }

    .sub{
      color: rgba(255,255,255,0.72);
      font-size: clamp(.9rem,2.6vw,1.1rem);
      margin-top:6px;
    }

    .hint{
      margin-top:14px;
      font-size:0.85rem;
      color:rgba(255,255,255,0.6);
    }

    /* Gi·∫£m chuy·ªÉn ƒë·ªông n·∫øu ng∆∞·ªùi d√πng y√™u c·∫ßu */
    @media (prefers-reduced-motion: reduce) {
      .heart{ animation: none; opacity:.95 }
    }

    /* Responsive */
    @media (max-width:520px){
      .card{ padding:20px;border-radius:14px }
      .message{ font-size:clamp(1.4rem,7vw,2.2rem) }
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts" aria-hidden="true"></div>

  <main class="card" role="main" aria-labelledby="main-message">
    <h1 id="main-message" class="message">G·ª≠i y√™u th∆∞∆°ng‚Ä¶</h1>
    <p class="sub" id="sub">M·∫πo: thay ƒë·ªïi n·ªôi dung ch√≠nh b·∫±ng c√°ch th√™m ?text=Tin%20nh·∫Øn v√†o URL</p>
    <p class="hint">T·∫°o b·∫±ng tr√°i tim ph√°t s√°ng ‚Ä¢ Responsive ‚Ä¢ Ho·∫°t ·∫£nh m∆∞·ª£t</p>
  </main>

  <script>
    // L·∫•y message t·ª´ ?text= (g√°n an to√†n b·∫±ng textContent)
    (function(){
      const params = new URLSearchParams(location.search);
      const raw = params.get('text');
      const message = raw ? raw : 'Em l√†m tr√°i tim anh/ ch·ªã bay b·ªïng.';
      const el = document.getElementById('main-message');
      el.textContent = message;
      document.title = message + ' ‚Äî üíñ';
    })();

    // T·∫°o c√°c tr√°i tim bay v·ªõi thu·ªôc t√≠nh ng·∫´u nhi√™n
    (function createHearts(){
      const container = document.getElementById('hearts');
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const HEART_COUNT = prefersReduced ? 6 : 26;

      const rand = (min, max) => Math.random() * (max - min) + min;

      for(let i=0;i<HEART_COUNT;i++){
        const heart = document.createElement('div');
        heart.className = 'heart ' + (Math.random() > 0.7 ? 'variant-2' : '');
        const left = rand(3,97);
        heart.style.left = left + '%';

        const size = rand(16, 88); // px
        heart.style.fontSize = size + 'px';
        heart.style.transform = `translateX(-50%) rotate(${rand(0,90)}deg)`;

        const duration = rand(8, 20);
        const delay = rand(-10, 6);
        heart.style.animationDuration = `${duration}s, ${rand(6,14)}s, ${duration}s`;
        heart.style.animationDelay = `${delay}s, ${delay}s, ${delay}s`;
        heart.style.opacity = rand(0.7, 1);

        const shape = document.createElement('span');
        shape.className = 'shape';
        heart.appendChild(shape);

        container.appendChild(heart);

        // G·ª° tim sau khi k·∫øt th√∫c ho·∫°t ·∫£nh ƒë·ªÉ tr√°nh DOM tƒÉng kh√¥ng ki·ªÉm so√°t
        setTimeout(() => {
          try {
            container.removeChild(heart);
            if(Math.random() > 0.3 && !prefersReduced) {
              setTimeout(() => {
                if(container) container.appendChild(createSingleHeart(left));
              }, rand(500, 4000));
            }
          } catch(e){}
        }, (Math.abs(delay) + duration + 2) * 1000);
      }

      function createSingleHeart(leftPercent) {
        const heart = document.createElement('div');
        heart.className = 'heart ' + (Math.random() > 0.7 ? 'variant-2' : '');
        const left = leftPercent ?? rand(3,97);
        heart.style.left = left + '%';
        const size = rand(16, 88);
        heart.style.fontSize = size + 'px';
        heart.style.transform = `translateX(-50%) rotate(${rand(0,90)}deg)`;
        const duration = rand(8, 20);
        const delay = rand(0, 6);
        heart.style.animationDuration = `${duration}s, ${rand(6,14)}s, ${duration}s`;
        heart.style.animationDelay = `${delay}s, ${delay}s, ${delay}s`;
        heart.style.opacity = rand(0.7, 1);
        const shape = document.createElement('span');
        shape.className = 'shape';
        heart.appendChild(shape);

        setTimeout(()=>{
          try{ container.removeChild(heart); }catch(e){}
        }, (delay + duration + 2)*1000);

        return heart;
      }

    })();
  </script>
</body>
</html>
